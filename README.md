# 简约任务 - 微信小程序

一个简约风格的任务管理微信小程序，提供直观的任务管理体验。

## 功能特性 

- ✅ 添加任务（标题、描述、截止日期、优先级）
- ✅ 编辑和删除任务
- ✅ 任务完成状态切换
- ✅ 多种排序方式（创建时间、截止日期、优先级）
- ✅ 任务搜索功能
- ✅ 已完成/未完成任务筛选
- ✅ 本地数据存储
- ✅ 简约的视觉设计
- ✅ 任务提醒与订阅消息通知
- ✅ 任务分类管理（多计划、颜色与图标）

## 项目结构

```
├── app.js              # 小程序主逻辑
├── app.json            # 小程序配置
├── app.wxss            # 全局样式
├── sitemap.json        # 站点地图配置
├── utils/
│   ├── task.js         # 任务数据模型和工具函数
│   └── category.js     # 分类配置与工具函数
└── pages/
    ├── index/          # 任务列表主页面
    │   ├── index.js
    │   ├── index.wxml
    │   ├── index.wxss
    │   └── index.json
    ├── add-task/       # 添加任务页面
    │   ├── add-task.js
    │   ├── add-task.wxml
    │   ├── add-task.wxss
    │   └── add-task.json
    ├── edit-task/      # 编辑任务页面
    │   ├── edit-task.js
    │   ├── edit-task.wxml
    │   ├── edit-task.wxss
    │   └── edit-task.json
    └── categories/     # 分类管理页面
        ├── categories.js
        ├── categories.wxml
        ├── categories.wxss
        └── categories.json
```

## 如何运行

1. 确保您已安装微信开发者工具
2. 打开微信开发者工具
3. 选择"导入项目"
4. 选择本项目目录
5. 填入您的小程序AppID（测试阶段可以使用测试号）
6. 点击"导入"开始调试

## 提醒功能配置

1. **准备订阅模板**：在微信公众平台申请任务提醒类订阅消息模板，记录模板ID以及使用到的字段（例如 `thing1`、`time2` 等）。
2. **更新模板配置**：编辑 `utils/reminder.js`，将 `REMINDER_TEMPLATE_ID` 替换为实际模板ID，并根据模板字段调整 `buildSubscribeMessageData` 中的数据键名。
3. **配置云环境**：在小程序中绑定云开发环境，更新 `miniprogram/envList.js` 或在 `wx.cloud.init` 中指定默认环境。
4. **初始化集合**：在云开发控制台创建名为 `reminders` 的集合，用于存储提醒计划。
5. **部署云函数**：使用微信开发者工具上传并部署 `cloudfunctions/reminder`，确保拥有调用订阅消息接口的权限。
6. **设置定时触发器**：在云开发控制台为 `reminder` 云函数配置定时触发器（例如每5分钟执行一次，参数 `{ "action": "process" }`），以按时推送提醒。
7. **发布前校验**：真机调试并确认在授权订阅消息后，可以成功创建提醒并在任务到期前收到通知。

## 设计特点

- **简约风格**：采用现代简约的设计风格，注重用户体验
- **渐变色彩**：头部使用蓝紫色渐变，增加视觉吸引力
- **圆角设计**：大量使用圆角元素，提供温和的视觉体验
- **状态反馈**：完成任务时有视觉反馈和动画效果
- **响应式布局**：适配不同屏幕尺寸
- **深色模式支持**：支持系统深色模式 没有实现



## 数据模型

任务对象包含以下字段：
- `id`: 唯一标识符
- `title`: 任务标题（必填，最多100字符）
- `description`: 任务描述（可选，最多500字符）
- `dueDate`: 截止日期（可选）
- `priority`: 优先级（high/medium/low）
- `categoryId`: 分类ID（对应计划类别）
- `completed`: 完成状态（布尔值）
- `createdAt`: 创建时间
- `updatedAt`: 最后更新时间

分类对象包含以下字段：
- `id`: 分类唯一标识
- `name`: 分类名称
- `color`: 分类配色（用于标签和突出显示）
- `icon`: 分类图标（emoji）
- `createdAt`/`updatedAt`: 记录创建与更新时间

## 技术实现

- **数据存储**：使用微信小程序的本地存储API
- **模块化**：将任务相关的工具函数抽离为独立模块
- **表单验证**：实时验证用户输入
- **状态管理**：通过App实例管理全局状态
- **交互反馈**：提供丰富的用户交互反馈

## 使用说明 

1. **查看任务**：在主页面查看所有任务，支持搜索和筛选
2. **添加任务**：点击右下角"+"按钮添加新任务
3. **编辑任务**：点击任务卡片进入编辑页面
4. **完成任务**：点击任务前的圆圈标记任务完成
5. **删除任务**：在编辑页面或主页面点击删除按钮
6. **排序任务**：使用顶部的排序选项按不同方式排序
7. **搜索任务**：在搜索框中输入关键词搜索任务
8. **管理分类**：在主页面顶部选择分类或通过“管理”按钮进入分类管理页，支持新增、编辑、删除及颜色/图标配置

## 开发注意事项

- 所有数据存储在本地，卸载小程序会丢失数据
- 支持离线使用，无需网络连接
- 遵循微信小程序开发规范
- 兼容最新版本的微信小程序基础库

## 参考文档

- [微信小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [微信小程序设计指南](https://developers.weixin.qq.com/miniprogram/design/)
